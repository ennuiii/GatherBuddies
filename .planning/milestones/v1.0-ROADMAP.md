# Milestone v1.0: GameBuddies Hub MVP

**Status:** SHIPPED 2026-01-14
**Phases:** 1, 1.5, 2, 3
**Total Plans:** 13

## Overview

Integrate a SkyOffice-style 2D virtual world into the GameBuddies platform. Players navigate as avatars, chat via proximity video, and launch games through arcade cabinet portals. Uses Colyseus for world state (inside GameBuddieGamesServer) and GameBuddiesTemplate for client structure.

## Phases

### Phase 1: Foundation

**Goal**: Working Phaser3 2D world with avatar movement and Colyseus state sync
**Depends on**: None
**Plans**: 2 plans

Plans:
- [x] 01-01: Server foundation - Colyseus setup with HubRoom
- [x] 01-02: Client foundation - Phaser world with avatar movement

**Details:**
- Standalone Colyseus server with HubRoom (GameBuddiesHub/server)
- Phaser3 client with Bootstrap/Game scenes
- Character classes: Player, MyPlayer, OtherPlayer
- WASD/Arrow movement with animation
- Basic multiplayer position sync

### Phase 1.5: Integration (INSERTED)

**Goal**: Migrate standalone implementation into GameBuddies platform infrastructure
**Depends on**: Phase 1
**Plans**: 3 plans

Plans:
- [x] 1.5-01: Add Colyseus to GameBuddieGamesServer
- [x] 1.5-02: Create Hub client from GameBuddiesTemplate
- [x] 1.5-03: Integrate Phaser into GamePage

**Details:**
- Colyseus Server on port 3002 (separate from Socket.IO 3001)
- HubRoom for 2D world state sync
- Hub client using GameBuddiesTemplate structure
- Phaser3 canvas in GamePage component
- Multiplayer avatar movement via Colyseus

### Phase 2: Social Features

**Goal**: Proximity-based communication enabling players to meet and chat naturally
**Depends on**: Phase 1.5
**Plans**: 6 plans

Plans:
- [x] 2-01: Proximity Detection - Physics overlap with debounced events
- [x] 2-02: Conversation State - Server-authoritative conversation lifecycle
- [x] 2-03: Video Chat Integration
- [x] 2-04: Audio Routing - Web Audio API gain-based isolation
- [x] 2-05: Text Chat - Speech bubbles via Phaser, ChatInput component
- [x] 2-06: Avatar Selection - In-game character selection overlay

**Details:**
- Proximity detection (trigger when avatars near each other)
- Video/audio chat via WebRTC (reuse template's WebRTCContext)
- Text chat with speech bubbles over avatars
- 750ms debounce for connect/disconnect stability
- Web Audio API for conversation audio isolation

### Phase 3: Game Integration

**Goal**: Portal zones that launch GameBuddies games
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 3-01: Arcade Cabinet Portals - Cabinet objects with E key interaction
- [x] 3-02: Game Launch UI - React modal for game launching

**Details:**
- 8 arcade cabinet objects with game labels
- E key interaction to open game launch dialog
- GAME_INVITE message type for inviting nearby players
- Games open in new tab with Hub room code as game room code
- role=gm parameter for initiator to create room

---

## Milestone Summary

**Decimal Phases:**
- Phase 1.5: Integration (inserted after Phase 1 for platform integration)

**Key Decisions:**
- Colyseus integrated INTO GameBuddieGamesServer (not separate server)
- Colyseus on port 3002, Socket.IO on port 3001 (separate ports required)
- Hub as GamePlugin using Socket.IO for room flow + Colyseus for 2D world state
- Client follows GameBuddiesTemplate structure (HomePage -> LobbyPage -> GamePage)
- Portal zones launch games via URL navigation
- 750ms debounce for proximity connect/disconnect
- Higher sessionId initiates connection (prevents duplicates)
- phaserEvents for Phaser-to-React communication
- Web Audio API gain-based routing for conversation audio isolation
- Hub room code used as game room code (avoids CORS issues)
- Games open in new tab to preserve Hub session
- GAME_INVITE message type value 10 (explicit numbering)

**Issues Resolved:**
- Cross-origin API calls avoided by using Hub room code as game room code
- Duplicate P2P connections prevented by higher sessionId initiating

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- Phaser bundle ~1.7MB (can optimize with code splitting later)
- colyseus.js typing issues required @ts-expect-error comments

---

_For current project status, see .planning/ROADMAP.md_
