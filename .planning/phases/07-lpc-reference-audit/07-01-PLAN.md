---
phase: 07-lpc-reference-audit
plan: 01
type: execute
---

<objective>
Update AvatarManifest.ts to include all valid clothing items from LPC-Reference with correct body type support and animation capability flags.

Purpose: Fix avatar editor showing limited options (e.g., no tops for male body type) by aligning manifest with actual LPC assets.
Output: Updated AvatarManifest.ts with comprehensive clothing options filtered by body type and animation support.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-lpc-reference-audit/07-RESEARCH.md

**Key files:**
@GameBuddiesHub/client/src/services/AvatarManifest.ts
@GameBuddiesHub/client/src/types/avatar.ts

**Research findings summary:**
- Root cause: Manifest only includes `tshirt` for tops (female/teen only)
- LPC sheet definitions have `layer_1` object keys defining body type support
- Items with `animations` array have extended animations (idle/sit/run/walk)
- Items without `animations` array only have walk (use fallback in AvatarCompositor)

**Body type support from LPC-Reference:**
- Tops with extended animations AND male support: shortsleeve_polo
- Tops with extended animations (female/teen only): tshirt, longsleeve2, sleeveless2
- Tops with walk-only (have male): longsleeve, shortsleeve, sleeveless
- Bottoms with extended animations: pants, pants2, shorts, pantaloons, formal, etc.
- Shoes with extended animations: shoes2, boots2 (both have male via thin/ fallback)

**Constraining decisions from v1.1:**
- AvatarManifest as source of truth (Phase 4)
- supportedBodyTypes array filters options in editor (Phase 5)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update avatar.ts types to support new clothing items</name>
  <files>GameBuddiesHub/client/src/types/avatar.ts</files>
  <action>
  Add new clothing type literals to support additional items discovered in research:

  For ClothingTop type, add:
  - 'longsleeve' (male, female, pregnant, teen)
  - 'shortsleeve' (male, female, pregnant, teen)
  - 'sleeveless' (male, female)
  - 'shortsleeve_polo' (male, female, pregnant, teen) - has extended animations
  - 'longsleeve2' (female, teen) - has extended animations
  - 'sleeveless2' (female, teen) - has extended animations

  For Shoes type, verify shoes2 and boots2 exist (they should).

  DO NOT add muscular or child body types to tops unless LPC-Reference explicitly supports them (most don't).
  </action>
  <verify>TypeScript compiles without errors: cd GameBuddiesHub/client && npx tsc --noEmit</verify>
  <done>ClothingTop type includes all new top options, no type errors</done>
</task>

<task type="auto">
  <name>Task 2: Expand TOPS array in AvatarManifest with body type support</name>
  <files>GameBuddiesHub/client/src/services/AvatarManifest.ts</files>
  <action>
  Update the TOPS array to include all tops discovered in research. For each item, set supportedBodyTypes based on LPC-Reference sheet_definitions layer_1 keys:

  ```typescript
  export const TOPS: ClothingTopOption[] = [
    { id: 'none', displayName: 'None', supportedBodyTypes: ['male', 'female', 'muscular', 'child', 'teen'] },
    // Extended animations (preferred - have idle/sit/run/walk)
    { id: 'shortsleeve_polo', displayName: 'Polo Shirt', supportedBodyTypes: ['male', 'female', 'teen'] },
    { id: 'tshirt', displayName: 'T-Shirt', supportedBodyTypes: ['female', 'teen'] },
    { id: 'longsleeve2', displayName: 'Long Sleeve', supportedBodyTypes: ['female', 'teen'] },
    { id: 'sleeveless2', displayName: 'Tank Top', supportedBodyTypes: ['female', 'teen'] },
    // Walk-only animations (use walk fallback for idle/sit/run)
    { id: 'longsleeve', displayName: 'Long Sleeve (Basic)', supportedBodyTypes: ['male', 'female', 'teen'] },
    { id: 'shortsleeve', displayName: 'Short Sleeve (Basic)', supportedBodyTypes: ['male', 'female', 'teen'] },
    { id: 'sleeveless', displayName: 'Sleeveless (Basic)', supportedBodyTypes: ['male', 'female'] },
  ];
  ```

  Note: 'pregnant' body type is NOT in manifest's BODY_TYPES array, so omit from supportedBodyTypes even if LPC supports it.

  Update the comment at the top of TOPS to explain the two categories:
  - Extended animations items have proper idle/sit/run/walk
  - Basic items use walk animation as fallback
  </action>
  <verify>TypeScript compiles: cd GameBuddiesHub/client && npx tsc --noEmit</verify>
  <done>TOPS array has 8+ items including male-supporting options like shortsleeve_polo, longsleeve, shortsleeve</done>
</task>

<task type="auto">
  <name>Task 3: Update SHOES array to include female/teen support for shoes2/boots2</name>
  <files>GameBuddiesHub/client/src/services/AvatarManifest.ts</files>
  <action>
  Update SHOES array based on LPC-Reference findings. The sheet definitions show:
  - shoes2: male, female, teen, pregnant (using thin/ path for non-male)
  - boots2: male, female, teen, pregnant (using thin/ path for non-male)

  Update supportedBodyTypes to include female and teen:

  ```typescript
  export const SHOES: ShoesOption[] = [
    { id: 'none', displayName: 'Barefoot', supportedBodyTypes: ['male', 'female', 'muscular', 'child', 'teen'] },
    { id: 'shoes2', displayName: 'Shoes', supportedBodyTypes: ['male', 'female', 'muscular', 'child', 'teen'] },
    { id: 'boots2', displayName: 'Boots', supportedBodyTypes: ['male', 'female', 'muscular', 'child', 'teen'] },
  ];
  ```

  The AvatarAssetLoader already handles the male vs thin path mapping, so this should work without path changes.
  </action>
  <verify>TypeScript compiles: cd GameBuddiesHub/client && npx tsc --noEmit</verify>
  <done>SHOES array has shoes2 and boots2 supporting all body types</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd GameBuddiesHub/client && npx tsc --noEmit` passes
- [ ] TOPS array includes male-supporting options (shortsleeve_polo, longsleeve, shortsleeve)
- [ ] SHOES array includes female/teen for shoes2 and boots2
- [ ] All new type literals are defined in avatar.ts
</verification>

<success_criteria>
- All tasks completed
- TypeScript compiles without errors
- Male body type now has top options beyond 'none'
- Female/teen body types have shoe options
- Comments document which items have extended vs basic animations
</success_criteria>

<output>
After completion, create `.planning/phases/07-lpc-reference-audit/07-01-SUMMARY.md`:

# Phase 7 Plan 01: Avatar Manifest Expansion Summary

**[Substantive summary of changes]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `GameBuddiesHub/client/src/types/avatar.ts` - Added new clothing type literals
- `GameBuddiesHub/client/src/services/AvatarManifest.ts` - Expanded TOPS and SHOES arrays

## Decisions Made

- [Any decisions about which items to include/exclude]

## Issues Encountered

- [Problems and resolutions, or "None"]

## Next Step

Ready for Phase 8 (UI/UX Implementation) or additional 07-02 plan if path resolution issues discovered
</output>
